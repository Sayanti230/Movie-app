<!DOCTYPE html>
<html>
<head>
	<title>Description</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
</head>
<style type="text/css">
	.jumbotron{
		
		background-repeat: no-repeat;
		background-size: cover;
		height: 600px;
		background-image: linear-gradient(to right, rgba(0,0,0,0.4),rgba(0,0,0,0.6));

	}
	.container{
		max-width: 1300px;
	}
	.col-9{
		color: white;
	}
</style>
<script type="text/javascript">
	$(document).ready(function(){
		var url = window.location.search;
		var urlParams = new URLSearchParams(url);
		var movie_id = urlParams.get('id');

		$.ajax({
			url: `https://api.themoviedb.org/3/movie/${movie_id}
			?api_key=8265bd1679663a7ea12ac168da84d2e8&language=en-US`,

			type : 'GET',
			success: function(data){
				console.log(data);

				var movie_name = data.title;
				var release_date = data.release_date;
				var runtime = data.runtime;
				var tagline = data.tagline;
				var overview = data.overview;
				
				

				var backdrop_path = 'https://image.tmdb.org/t/p/w500/' + data.backdrop_path;
				var poster_path = 'https://image.tmdb.org/t/p/w500/' + data.poster_path;
				$('#poster').html(`<img src="${poster_path}" style="width: 100%;height:300px;border-radius: 1opx">`);

				$('.jumbotron').css('background-image',`url(${backdrop_path})`);
				$('#movie_name').html(movie_name);
				$('#release-date').html(release_date);
				$('#runtime').html(runtime + "mins");
				$('#tagline').html(tagline);
				$('#overview').html(overview);
				
				

				var genres = '';

				for(var i=0;i<data.genres.length;i++){
					genres = genres + data.genres[i].name + ' ';

				}

				$('#genres').html(genres);

				$.ajax({
					url: `https://api.themoviedb.org/3/movie/${movie_id}/similar?api_key=8265bd1679663a7ea12ac168da84d2e8&language=en-US`,
					type: 'GET',
					success: function(data){
						for(var i = 0; i<data.results.length; i++){
							console.log(data.results[i].title)

							var title = data.results[i].title;
							var release_date = data.results[i].release_date;

							var poster_url = 'https://image.tmdb.org/t/p/w500/' + data.results[i].poster_path;
							var movie_id = data.results[i].id;
							

							var output = `
							<div class="col-2">
								<img src="${poster_url}" style="width: 100%;height: 250px">
								<a href="moviestar-description.html?id=${movie_id}"><h5>${title}</h5>
								<p class="text-muted">${release_date}</p>
							</div>`;
							$('#display-movies').append(output);
						}
					},
					error: function(error){
						console.log(error);
					}
				})
			},
			error: function(error){
				console.log(error);
			}
		})

	})
</script>
<body>
	<nav class="navbar navbar-fixed-top" style="background-color: #131927;color: white">
		<h2 class="navbar-brand mt-3"><i class="fas fa-bars mr-3"></i><b>MOVIESTAR</b><sup class="text-muted"><i>plus</i></sup></h2><h5>TV</h5><h5>NEWS</h5><h5>SPORTS</h5><h5>PREMIUM</h5><h5 style="color: yellow"><b>KIDS</b></h5>
	
		<div class="col-6">
			<input class="form-control" type="text" name="" placeholder="search" style="width: 50%;display: inline;height: 30px;"><button class="btn search-btn"><i class="fas fa-search" style="color: white"></i></button><button class="btn btn-primary">subscribe</button><i class="fas fa-user-circle ml-5"></i>
		</div>

		<div style="margin-left: -150px">

			<a href="#"><h5 style="font-size: 20px;">login</h5></a>
			
		</div>
	</nav>

	<h1>Movie Description</h1>

	<div class="jumbotron">
		<div class="container">
			<div class="row">
				<div class="col-3" id="poster">
					
				</div>
				<div class="col-9">
					<h1><span id="movie_name"><b></b></span></h1>
					
					<h5><span id="release-date"></span> <span id="genres"></span> <span id="runtime"></span></h5>
					<h5 id="tagline"></h5>
					<h4>OVERVIEW</h4>
					<P id="overview"></P>
					
				</div>
			</div>
			
		</div>

		
	</div>

	<div class="movie-container">
		<h1 class="mb-5">RECOMMENDED MOVIES</h1>
		<div class="row" id="display-movies">
			
		</div>
	</div>

</body>
</html>